(function(l){var m={colors:1,values:1,backgroundColor:1,scaleColors:1,normalizeFunction:1,enableZoom:1,borderColor:1,borderWidth:1,borderOpacity:1,selectedRegions:1,multiSelectRegion:1},j={onRegionOver:"regionMouseOver",onRegionOut:"regionMouseOut",onRegionClick:"regionClick"};l.fn.vectorMap=function(a){var b={map:"world_en",backgroundColor:"#a5bfdd",color:"#f4f3f0",hoverColor:"#c9dfaf",selectedColor:"#c9dfaf",scaleColors:["#b6d6ff","#005ace"],normalizeFunction:"linear",enableZoom:!0,borderColor:"#818181",
borderWidth:1,borderOpacity:0.25,selectedRegions:null,multiSelectRegion:!1},c;if("addMap"===a)g.maps[arguments[1]]=arguments[2];else if("set"===a&&m[arguments[1]])this.data("mapObject")["set"+arguments[1].charAt(0).toUpperCase()+arguments[1].substr(1)].apply(this.data("mapObject"),Array.prototype.slice.call(arguments,2));else{l.extend(b,a);b.container=this;this.css({position:"relative",overflow:"hidden"});c=new g(b);this.data("mapObject",c);for(var d in j)b[d]&&this.bind(j[d]+".jqvmap",b[d])}};var k=
function(a,b,c){this.mode=window.SVGAngle?"svg":"vml";this.params=c;if("svg"==this.mode)this.createSvgNode=function(a){return document.createElementNS(this.svgns,a)};else{try{document.namespaces.rvml||document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),this.createVmlNode=function(a){return document.createElement("<rvml:"+a+' class="rvml">')}}catch(d){this.createVmlNode=function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}document.createStyleSheet().addRule(".rvml",
"behavior:url(#default#VML)")}"svg"==this.mode?this.canvas=this.createSvgNode("svg"):(this.canvas=this.createVmlNode("group"),this.canvas.style.position="absolute");this.setSize(a,b)};k.prototype={svgns:"http://www.w3.org/2000/svg",mode:"svg",width:0,height:0,canvas:null,setSize:function(a,b){if("svg"==this.mode)this.canvas.setAttribute("width",a),this.canvas.setAttribute("height",b);else if(this.canvas.style.width=a+"px",this.canvas.style.height=b+"px",this.canvas.coordsize=a+" "+b,this.canvas.coordorigin=
"0 0",this.rootGroup){for(var c=this.rootGroup.getElementsByTagName("shape"),d=0,e=c.length;d<e;d++)c[d].coordsize=a+" "+b,c[d].style.width=a+"px",c[d].style.height=b+"px";this.rootGroup.coordsize=a+" "+b;this.rootGroup.style.width=a+"px";this.rootGroup.style.height=b+"px"}this.width=a;this.height=b},createPath:function(a){var b;"svg"==this.mode?(b=this.createSvgNode("path"),b.setAttribute("d",a.path),null!==this.params.borderColor&&b.setAttribute("stroke",this.params.borderColor),0<this.params.borderWidth&&
(b.setAttribute("stroke-width",this.params.borderWidth),b.setAttribute("stroke-linecap","round"),b.setAttribute("stroke-linejoin","round")),0<this.params.borderOpacity&&b.setAttribute("stroke-opacity",this.params.borderOpacity),b.setFill=function(a){this.setAttribute("fill",a);this.getAttribute("original")===null&&this.setAttribute("original",a)},b.getFill=function(){return this.getAttribute("fill")},b.getOriginalFill=function(){return this.getAttribute("original")},b.setOpacity=function(a){this.setAttribute("fill-opacity",
a)}):(b=this.createVmlNode("shape"),b.coordorigin="0 0",b.coordsize=this.width+" "+this.height,b.style.width=this.width+"px",b.style.height=this.height+"px",b.fillcolor=g.defaultFillColor,b.stroked=!1,b.path=k.pathSvgToVml(a.path),a=this.createVmlNode("skew"),a.on=!0,a.matrix="0.01,0,0,0.01,0,0",a.offset="0,0",b.appendChild(a),a=this.createVmlNode("fill"),b.appendChild(a),b.setFill=function(a){this.getElementsByTagName("fill")[0].color=a;null===this.getAttribute("original")&&this.setAttribute("original",
a)},b.getFill=function(){return this.getElementsByTagName("fill")[0].color},b.getOriginalFill=function(){return this.getAttribute("original")},b.setOpacity=function(a){this.getElementsByTagName("fill")[0].opacity=parseInt(100*a,10)+"%"});return b},createGroup:function(a){var b;"svg"==this.mode?b=this.createSvgNode("g"):(b=this.createVmlNode("group"),b.style.width=this.width+"px",b.style.height=this.height+"px",b.style.left="0px",b.style.top="0px",b.coordorigin="0 0",b.coordsize=this.width+" "+this.height);
a&&(this.rootGroup=b);return b},applyTransformParams:function(a,b,c){"svg"==this.mode?this.rootGroup.setAttribute("transform","scale("+a+") translate("+b+", "+c+")"):(this.rootGroup.coordorigin=this.width-b+","+(this.height-c),this.rootGroup.coordsize=this.width/a+","+this.height/a)}};k.pathSvgToVml=function(a){var b=0,c=0,d,e;return a.replace(/([MmLlHhVvCcSs])((?:-?(?:\d+)?(?:\.\d+)?,?\s?)+)/g,function(a,g,f){f=f.replace(/(\d)-/g,"$1,-").replace(/\s+/g,",").split(",");f[0]||f.shift();for(var a=0,
n=f.length;a<n;a++)f[a]=Math.round(100*f[a]);switch(g){case "m":return b+=f[0],c+=f[1],"t"+f.join(",");case "M":return b=f[0],c=f[1],"m"+f.join(",");case "l":return b+=f[0],c+=f[1],"r"+f.join(",");case "L":return b=f[0],c=f[1],"l"+f.join(",");case "h":return b+=f[0],"r"+f[0]+",0";case "H":return b=f[0],"l"+b+","+c;case "v":return c+=f[0],"r0,"+f[0];case "V":return c=f[0],"l"+b+","+c;case "c":return d=b+f[f.length-4],e=c+f[f.length-3],b+=f[f.length-2],c+=f[f.length-1],"v"+f.join(",");case "C":return d=
f[f.length-4],e=f[f.length-3],b=f[f.length-2],c=f[f.length-1],"c"+f.join(",");case "s":return f.unshift(c-e),f.unshift(b-d),d=b+f[f.length-4],e=c+f[f.length-3],b+=f[f.length-2],c+=f[f.length-1],"v"+f.join(",");case "S":return f.unshift(c+c-e),f.unshift(b+b-d),d=f[f.length-4],e=f[f.length-3],b=f[f.length-2],c=f[f.length-1],"c"+f.join(",")}return!1}).replace(/z/g,"")};var g=function(a){var a=a||{},b=this,c=g.maps[a.map];selectedRegions=[];this.container=a.container;this.defaultWidth=c.width;this.defaultHeight=
c.height;this.color=a.color;this.hoverColor=a.hoverColor;this.setBackgroundColor(a.backgroundColor);this.width=a.container.width();this.height=a.container.height();this.resize();jQuery(window).resize(function(){b.width=a.container.width();b.height=a.container.height();b.resize();b.canvas.setSize(b.width,b.height);b.applyTransform()});this.canvas=new k(this.width,this.height,a);a.container.append(this.canvas.canvas);this.makeDraggable();this.rootGroup=this.canvas.createGroup(!0);this.index=g.mapIndex;
a.enableZoom&&(jQuery("<div/>").addClass("jqvmap-zoomin").text("+").appendTo(a.container),jQuery("<div/>").addClass("jqvmap-zoomout").html("&#x2212;").appendTo(a.container));b.countries=[];for(var d in c.pathes){var e=this.canvas.createPath({path:c.pathes[d].path});e.setFill(this.color);e.id="jqvmap"+b.index+"_"+d;b.countries[d]=e;"svg"==this.canvas.mode?e.setAttribute("class","jqvmap-region"):jQuery(e).addClass("jqvmap-region");jQuery(this.rootGroup).append(e);if(null!==a.selectedRegions)if(a.selectedRegions instanceof
Array)for(var j in a.selectedRegions){var h=a.selectedRegions[j].toLowerCase();d.toLowerCase()==h&&(e.setFill(a.selectedColor),selectedRegions.push(h))}else h=a.selectedRegions.toLowerCase(),d.toLowerCase()==h&&(e.setFill(a.selectedColor),selectedRegions.push(h))}jQuery(a.container).delegate("svg"==this.canvas.mode?"path":"shape","mouseover mouseout",function(b){var d=b.target,e=b.target.id.split("_").pop(),g=l.Event("regionMouseOver.jqvmap");if(b.type=="mouseover"){jQuery(a.container).trigger(g,
[e,c.pathes[e].name]);if(!g.isDefaultPrevented())if(a.hoverOpacity)d.setOpacity(a.hoverOpacity);else if(a.hoverColor){d.currentFillColor=d.getFill()+"";d.setFill(a.hoverColor)}}else{d.setOpacity(1);d.currentFillColor&&d.setFill(d.currentFillColor);jQuery(a.container).trigger("regionMouseOut.jqvmap",[e,c.pathes[e].name])}});jQuery(a.container).delegate("svg"==this.canvas.mode?"path":"shape","click",function(d){if(!a.multiSelectRegion)for(var e in c.pathes){b.countries[e].currentFillColor=b.countries[e].getOriginalFill();
b.countries[e].setFill(b.countries[e].getOriginalFill())}e=d.target;d=d.target.id.split("_").pop();jQuery(a.container).trigger("regionClick.jqvmap",[d,c.pathes[d].name]);if(a.multiSelectRegion)if(selectedRegions.indexOf(d)!==-1){selectedRegions.splice(selectedRegions.indexOf(d),1);e.currentFillColor=a.color;e.setFill(a.color)}else{selectedRegions.push(d);if(a.selectedColor!==null){e.currentFillColor=a.selectedColor;e.setFill(a.selectedColor)}}else{selectedRegions=[];selectedRegions.push(d);if(a.selectedColor!==
null){e.currentFillColor=a.selectedColor;e.setFill(a.selectedColor)}}});this.setColors(a.colors);this.canvas.canvas.appendChild(this.rootGroup);this.applyTransform();this.colorScale=new i(a.scaleColors,a.normalizeFunction,a.valueMin,a.valueMax);a.values&&(this.values=a.values,this.setValues(a.values));this.bindZoomButtons();g.mapIndex++};g.prototype={transX:0,transY:0,scale:1,baseTransX:0,baseTransY:0,baseScale:1,width:0,height:0,countries:{},countriesColors:{},countriesData:{},zoomStep:1.4,zoomMaxStep:4,
zoomCurStep:1,setColors:function(a,b){if("string"==typeof a)this.countries[a].setFill(b),this.countries[a].setAttribute("original",b);else for(var c in a)this.countries[c]&&(this.countries[c].setFill(a[c]),this.countries[c].setAttribute("original",a[c]))},setValues:function(a){var b=0,c=Number.MAX_VALUE,d,e;for(e in a)d=parseFloat(a[e]),d>b&&(b=a[e]),d&&d<c&&(c=d);this.colorScale.setMin(c);this.colorScale.setMax(b);b={};for(e in a)d=parseFloat(a[e]),b[e]=d?this.colorScale.getColor(d):this.color;this.setColors(b);
this.values=a},setBackgroundColor:function(a){this.container.css("background-color",a)},setScaleColors:function(a){this.colorScale.setColors(a);this.values&&this.setValues(this.values)},setNormalizeFunction:function(a){this.colorScale.setNormalizeFunction(a);this.values&&this.setValues(this.values)},resize:function(){var a=this.baseScale;this.width/this.height>this.defaultWidth/this.defaultHeight?(this.baseScale=this.height/this.defaultHeight,this.baseTransX=Math.abs(this.width-this.defaultWidth*
this.baseScale)/(2*this.baseScale)):(this.baseScale=this.width/this.defaultWidth,this.baseTransY=Math.abs(this.height-this.defaultHeight*this.baseScale)/(2*this.baseScale));this.scale*=this.baseScale/a;this.transX*=this.baseScale/a;this.transY*=this.baseScale/a},reset:function(){this.countryTitle.reset();for(var a in this.countries)this.countries[a].setFill(g.defaultColor);this.scale=this.baseScale;this.transX=this.baseTransX;this.transY=this.baseTransY;this.applyTransform()},applyTransform:function(){var a,
b,c,d;this.defaultWidth*this.scale<=this.width?(a=(this.width-this.defaultWidth*this.scale)/(2*this.scale),c=(this.width-this.defaultWidth*this.scale)/(2*this.scale)):(a=0,c=(this.width-this.defaultWidth*this.scale)/this.scale);this.defaultHeight*this.scale<=this.height?(b=(this.height-this.defaultHeight*this.scale)/(2*this.scale),d=(this.height-this.defaultHeight*this.scale)/(2*this.scale)):(b=0,d=(this.height-this.defaultHeight*this.scale)/this.scale);this.transY>b?this.transY=b:this.transY<d&&
(this.transY=d);this.transX>a?this.transX=a:this.transX<c&&(this.transX=c);this.canvas.applyTransformParams(this.scale,this.transX,this.transY)},makeDraggable:function(){var a=!1,b,c,d=this;this.container.mousemove(function(e){a&&(d.transX-=(b-e.pageX)/d.scale,d.transY-=(c-e.pageY)/d.scale,d.applyTransform(),b=e.pageX,c=e.pageY);return!1}).mousedown(function(d){a=!0;b=d.pageX;c=d.pageY;return!1}).mouseup(function(){return a=!1})},bindZoomButtons:function(){var a=this,b=(jQuery("#zoom").innerHeight()-
12-30-6-7-6)/(this.zoomMaxStep-this.zoomCurStep);this.container.find(".jqvmap-zoomin").click(function(){a.zoomCurStep<a.zoomMaxStep&&(a.transX-=(a.width/a.scale-a.width/(a.scale*a.zoomStep))/2,a.transY-=(a.height/a.scale-a.height/(a.scale*a.zoomStep))/2,a.setScale(a.scale*a.zoomStep),a.zoomCurStep++,jQuery("#zoomSlider").css("top",parseInt(jQuery("#zoomSlider").css("top"),10)-b))});this.container.find(".jqvmap-zoomout").click(function(){1<a.zoomCurStep&&(a.transX+=(a.width/(a.scale/a.zoomStep)-a.width/
a.scale)/2,a.transY+=(a.height/(a.scale/a.zoomStep)-a.height/a.scale)/2,a.setScale(a.scale/a.zoomStep),a.zoomCurStep--,jQuery("#zoomSlider").css("top",parseInt(jQuery("#zoomSlider").css("top"),10)+b))})},setScale:function(a){this.scale=a;this.applyTransform()},getCountryPath:function(a){return jQuery("#"+a)[0]}};g.xlink="http://www.w3.org/1999/xlink";g.mapIndex=1;g.maps={};var i=function(a,b,c,d){a&&this.setColors(a);b&&this.setNormalizeFunction(b);c&&this.setMin(c);c&&this.setMax(d)};i.prototype=
{colors:[],setMin:function(a){this.clearMinValue=a;this.minValue="function"===typeof this.normalize?this.normalize(a):a},setMax:function(a){this.clearMaxValue=a;this.maxValue="function"===typeof this.normalize?this.normalize(a):a},setColors:function(a){for(var b=0;b<a.length;b++)a[b]=i.rgbToArray(a[b]);this.colors=a},setNormalizeFunction:function(a){"polynomial"===a?this.normalize=function(a){return Math.pow(a,0.2)}:"linear"===a?delete this.normalize:this.normalize=a;this.setMin(this.clearMinValue);
this.setMax(this.clearMaxValue)},getColor:function(a){"function"===typeof this.normalize&&(a=this.normalize(a));for(var b=[],c=0,d,e=0;e<this.colors.length-1;e++)d=this.vectorLength(this.vectorSubtract(this.colors[e+1],this.colors[e])),b.push(d),c+=d;c=(this.maxValue-this.minValue)/c;for(e=0;e<b.length;e++)b[e]*=c;e=0;for(a-=this.minValue;0<=a-b[e];)a-=b[e],e++;for(a=e==this.colors.length-1?this.vectorToNum(this.colors[e]).toString(16):this.vectorToNum(this.vectorAdd(this.colors[e],this.vectorMult(this.vectorSubtract(this.colors[e+
1],this.colors[e]),a/b[e]))).toString(16);6>a.length;)a="0"+a;return"#"+a},vectorToNum:function(a){for(var b=0,c=0;c<a.length;c++)b+=Math.round(a[c])*Math.pow(256,a.length-c-1);return b},vectorSubtract:function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d]-b[d];return c},vectorAdd:function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d]+b[d];return c},vectorMult:function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=a[d]*b;return c},vectorLength:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c]*a[c];
return Math.sqrt(b)}};i.arrayToRgb=function(a){for(var b="#",c,d=0;d<a.length;d++)c=a[d].toString(16),b+=1==c.length?"0"+c:c;return b};i.rgbToArray=function(a){a=a.substr(1);return[parseInt(a.substr(0,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(4,2),16)]}})(jQuery);